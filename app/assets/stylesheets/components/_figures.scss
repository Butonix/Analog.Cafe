@import "base/colors";
@import "base/sizes";
@import "base/typography";

@import "helpers/functions";
@import "helpers/mixins";


$figcaption-breakpoint: $size-column--maxwidth-m + $size-column--safety-min * 2;
$figcaption-padding: 0 ($size-column--safety / strip-unit($size-fontbase--smaller));

figure {
	& img {
		width: 100%;
		display: block;
	}
	& figcaption {
		@extend #{A(6)};
		@include breakpoint($size-breakpoint-s) {
			padding: $figcaption-padding;
		}
		.feature & {
			padding: $figcaption-padding;
		}
	}
	// locked to section (unlock to article level***)
	article section & {
		font-size: $size-fontbase--normal;
		padding: 0;	
		overflow: hidden;
		margin: 0 0 $size-content-block-spacing;
	
		@include breakpoint($size-breakpoint-s) {
			@include figure-bleed();
		}
		@include breakpoint($size-breakpoint-l) {
			width: 77.5%; 
			margin-left: calc((#{$size-column--maxwidth-m} - 100vw)/3.5);
			margin-right: $size-content-block-spacing;
			float: left;
		}
		@include breakpoint($size-breakpoint-xxl) {
			width: 94%; 
			margin-left: -$size-column--maxwidth-m/2.75;
			margin-right: $size-content-block-spacing;
			float: left;
		}
		&:not(.feature):first-of-type {
			padding-top: $size-fontbase--normal;
		}
		&.feature {
			@include figure-bleed();
			@include breakpoint($figcaption-breakpoint) {
				margin-left: calc((#{$size-column--maxwidth-m} - 100vw)/2);
			}
			@include breakpoint($size-breakpoint-xl) {
				margin-left: calc((#{$size-column--maxwidth-l} - 100vw)/2);
			}
			float: none;			
			& figcaption {
				@include breakpoint($figcaption-breakpoint) {
					@include center-block--responsive();
				}
				@include breakpoint($figcaption-breakpoint 0) {
					padding: $figcaption-padding;
				}
			}
		}
	}
	
	.card & {
		margin: 0;
		background-size: cover;
		background-position: center;
		font-size: $size-fontbase--normal;
		overflow: visible;
    float: none;
    width: 100%;
		& img {
			margin-top: -( $size-content-block-spacing + $size-fontbase--smaller * strip-unit($font-content--line) );
		}
		& figcaption {
			@extend #{A(6)};
			background: $color-background;
			padding: $size-column--safety;
		}
	}
	
}


